(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},19499,e=>{"use strict";e.s(["default",()=>n]);var s=e.i(43476),t=e.i(71645),r=e.i(18566),a=e.i(15683);function n(){let e=(0,r.useRouter)(),[n,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(""),f=(0,r.useSearchParams)();async function w(s){if(s.preventDefault(),n!==i)return void d("Passwords don't match");if(n.length<6)return void d("Password must be at least 6 characters");m(!0),d("");try{let s=await fetch("/api/password/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h,password:n})}),t=await s.json();if(!s.ok)throw Error(t.message||"Something went wrong");(0,a.toast)({title:"Success",description:"Password reset successfully..."}),setTimeout(()=>{e.push("https://pearlcitypos.com/login")},100),o(""),l("")}catch(e){d(e instanceof Error?e.message:"Something went wrong")}finally{m(!1)}}return((0,t.useEffect)(()=>{let e=f.get("token");e&&p(e)},[f]),h)?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsxs)("form",{onSubmit:w,className:"p-6 border rounded w-96",children:[(0,s.jsx)("h1",{className:"text-xl mb-4",children:"Reset Password"}),(0,s.jsx)("input",{type:"password",name:"password",className:"border p-2 w-full mb-3",placeholder:"New password",value:n,onChange:e=>o(e.target.value),required:!0}),(0,s.jsx)("input",{type:"password",name:"confirmPassword",className:"border p-2 w-full mb-3",placeholder:"Confirm new password",value:i,onChange:e=>l(e.target.value),required:!0}),(0,s.jsx)("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white p-2 w-full rounded disabled:bg-blue-400",children:u?"Resetting...":"Reset Password"}),c&&(0,s.jsx)("p",{className:"mt-3 ".concat(c.includes("successfully")?"text-green-600":"text-red-600"),children:c})]})}):(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsxs)("div",{className:"p-6 border rounded w-96",children:[(0,s.jsx)("h1",{className:"text-xl mb-4",children:"Invalid Reset Link"}),(0,s.jsx)("p",{children:"Please use the reset link from your email."})]})})}},78687,e=>{e.n(e.i(19499))}]);